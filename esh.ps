%!PS
%%Version: 3.15
%%DocumentFonts: (atend)
%%Pages: (atend)
%%EndComments
%ident	"@(#)lp:filter/postscript/postscript/dpost.ps	1.1"
%
% Version 3.16 prologue for troff files.
%

/#copies 1 store
/aspectratio 1 def
/formsperpage 1 def
/landscape false def
/linewidth .3 def
/magnification 1 def
/margin 0 def
/orientation 0 def
/resolution 720 def
/xoffset 0 def
/yoffset 0 def

/roundpage true def
/useclippath true def
/pagebbox [0 0 612 792] def

/R  /Times-Roman def
/I  /Times-Italic def
/B  /Times-Bold def
/BI /Times-BoldItalic def
/H  /Helvetica def
/HI /Helvetica-Oblique def
/HB /Helvetica-Bold def
/HX /Helvetica-BoldOblique def
/CW /Courier def
/CO /Courier def
/CI /Courier-Oblique def
/CB /Courier-Bold def
/CX /Courier-BoldOblique def
/PA /Palatino-Roman def
/PI /Palatino-Italic def
/PB /Palatino-Bold def
/PX /Palatino-BoldItalic def
/Hr /Helvetica-Narrow def
/Hi /Helvetica-Narrow-Oblique def
/Hb /Helvetica-Narrow-Bold def
/Hx /Helvetica-Narrow-BoldOblique def
/KR /Bookman-Light def
/KI /Bookman-LightItalic def
/KB /Bookman-Demi def
/KX /Bookman-DemiItalic def
/AR /AvantGarde-Book def
/AI /AvantGarde-BookOblique def
/AB /AvantGarde-Demi def
/AX /AvantGarde-DemiOblique def
/NR /NewCenturySchlbk-Roman def
/NI /NewCenturySchlbk-Italic def
/NB /NewCenturySchlbk-Bold def
/NX /NewCenturySchlbk-BoldItalic def
/ZD /ZapfDingbats def
/ZI /ZapfChancery-MediumItalic def
/VR /Varitimes#Roman def
/VI /Varitimes#Italic def
/VB /Varitimes#Bold def
/VX /Varitimes#BoldItalic def
/S  /S def
/S1 /S1 def
/GR /Symbol def

/inch {72 mul} bind def
/min {2 copy gt {exch} if pop} bind def

/setup {
	counttomark 2 idiv {def} repeat pop

	landscape {/orientation 90 orientation add def} if
	/scaling 72 resolution div def
	linewidth setlinewidth
	1 setlinecap

	pagedimensions
	xcenter ycenter translate
	orientation neg rotate
	width 2 div neg height 2 div translate
	xoffset inch yoffset inch translate
	margin 2 div dup neg translate
	magnification dup aspectratio mul scale
	scaling scaling scale

	/Symbol /S Sdefs cf
	/Times-Roman /S1 S1defs cf
	0 0 moveto
} def

/pagedimensions {
	useclippath userdict /gotpagebbox known not and {
		/pagebbox [clippath pathbbox newpath] def
		roundpage currentdict /roundpagebbox known and {roundpagebbox} if
	} if
	pagebbox aload pop
	4 -1 roll exch 4 1 roll 4 copy
	landscape {4 2 roll} if
	sub /width exch def
	sub /height exch def
	add 2 div /xcenter exch def
	add 2 div /ycenter exch def
	userdict /gotpagebbox true put
} def

/pagesetup {
	/page exch def
	currentdict /pagedict known currentdict page known and {
		page load pagedict exch get cvx exec
	} if
} def

/decodingdefs [
	{counttomark 2 idiv {y moveto show} repeat}
	{neg /y exch def counttomark 2 idiv {y moveto show} repeat}
	{neg moveto {2 index stringwidth pop sub exch div 0 32 4 -1 roll widthshow} repeat}
	{neg moveto {spacewidth sub 0.0 32 4 -1 roll widthshow} repeat}
	{counttomark 2 idiv {y moveto show} repeat}
	{neg setfunnytext}
] def

/setdecoding {/t decodingdefs 3 -1 roll get bind def} bind def

/w {neg moveto show} bind def
/m {neg dup /y exch def moveto} bind def
/done {/lastpage where {pop lastpage} if} def

/f {
	dup /font exch def findfont exch
	dup /ptsize exch def scaling div dup /size exch def scalefont setfont
	linewidth ptsize mul scaling 10 mul div setlinewidth
	/spacewidth ( ) stringwidth pop def
} bind def

/changefont {
	/fontheight exch def
	/fontslant exch def
	currentfont [
		1 0
		fontheight ptsize div fontslant sin mul fontslant cos div
		fontheight ptsize div
		0 0
	] makefont setfont
} bind def

/sf {f} bind def

/cf {
	dup length 2 idiv
	/entries exch def
	/chtab exch def
	/newfont exch def

	findfont dup length 1 add dict
	/newdict exch def
	{1 index /FID ne {newdict 3 1 roll put} {pop pop} ifelse} forall

	newdict /Metrics entries dict put
	newdict /Metrics get
	begin
		chtab aload pop
		1 1 entries {pop def} for
		newfont newdict definefont pop
	end
} bind def

%
% A few arrays used to adjust reference points and character widths in some
% of the printer resident fonts. If square roots are too high try changing
% the lines describing /radical and /radicalex to,
%
%	/radical	[0 -75 550 0]
%	/radicalex	[-50 -75 500 0]
%

/Sdefs [
	/bracketlefttp		[220 500]
	/bracketleftbt		[220 500]
	/bracketrighttp		[-70 380]
	/bracketrightbt		[-70 380]
	/braceleftbt		[220 490]
	/bracketrightex		[220 -125 500 0]
	/radical		[0 0 550 0]
	% NeWSprint's \(br is too low, compensate
	statusdict /product get (NeWS Server) eq {
		/radicalex		[-50 100 500 0]
		/parenleftex		[-20 100 0 0]

	} {
		/radicalex		[-50 0 500 0]
		/parenleftex		[-20 -170 0 0]
	} ifelse
	/integral		[100 -50 500 0]
	/infinity		[10 -75 730 0]
] def

/S1defs [
	/underscore		[0 80 500 0]
	/endash			[7 90 650 0]
] def
%%EndProlog
%%BeginSetup
mark
/resolution 720 def
setup
2 setdecoding
%%EndSetup
%%Page: 1 1
save
mark
1 pagesetup
10 R f
( \( 1 \))3 164( ESH)1 1838( Commands)1 489( User)1 1836(ESH \( 1 \))3 353 5 720 480 t
9 B f
(NAME)720 960 w
10 R f
(esh)1080 1080 w
10 S1 f
(\261)1246 1080 w
10 R f
(the environmental meta-shell)2 1181 1 1344 1080 t
9 B f
(SYNOPSIS)720 1248 w
10 B f
(esh)1080 1368 w
10 R f
([)1252 1368 w
10 B f
(-B)1301 1368 w
10 S f
(\372)1434 1368 w
10 B f
(-C)1517 1368 w
10 R f
(] [)1 99 1 1638 1368 t
10 B f
(-D)1753 1368 w
10 R f
(] [)1 99 1 1874 1368 t
10 B f
(-E)1989 1368 w
10 I f
(sysenv)2122 1368 w
10 R f
(] [)1 99 1 2406 1368 t
10 B f
(-F)2521 1368 w
10 I f
(usrenv)2648 1368 w
10 R f
(] [)1 99 1 2938 1368 t
10 B f
(-L)3053 1368 w
10 R f
(] [)1 99 1 3169 1368 t
10 B f
(-S)3284 1368 w
10 I f
(shell)3406 1368 w
10 R f
(] [)1 99 1 3619 1368 t
10 I f
(shell)3734 1368 w
10 S f
(_)3923 1368 w
10 I f
(args . . .)3 301 1 3973 1368 t
10 R f
(])4298 1368 w
9 B f
(DESCRIPTION)720 1536 w
10 I f
(Esh)1080 1656 w
10 R f
(is the environmental meta-shell \(a.k.a.)4 1580 1 1268 1656 t
10 I f
(green)2919 1656 w
10 R f
(\).)3154 1656 w
10 I f
(Esh)3283 1656 w
10 R f
( user)1 205(performs the task of setting up a site and)8 1724 2 3471 1656 t
( intended usage of)3 753( The)1 221( executing the user's real shell.)5 1276(speci\256c initial environment before)3 1400 4 1080 1776 t
10 I f
(esh)4763 1776 w
10 R f
(is not as an)3 471 1 4929 1776 t
( is)1 108( the user logs in and)5 877( When)1 311(interactive program, but rather as the value of shell \256eld in /etc/passwd.)11 3024 4 1080 1896 t
(given)1080 2016 w
10 I f
(esh)1346 2016 w
10 R f
( by scanning a site wide environment \256le, /etc/environ, for variable)10 2859(as his shell, it will start)5 1018 2 1523 2016 t
( will the proceed to read the user's personal environment)9 2405( It)1 134( initial environment.)2 844(bindings and create an)3 937 4 1080 2136 t
(\256le,)1080 2256 w
10 S1 f
(\304)1273 2256 w
10 R f
( the)1 161( will then replace itself with)5 1193( It)1 134(/.environ, and augument the environment with his preferences.)7 2606 4 1306 2256 t
( by the value of the environment variable SHELL or by \256nding and)12 2991(user's real shell, as determined)4 1329 2 1080 2376 t
(inspecting)1080 2496 w
10 S1 f
(\304)1528 2496 w
10 R f
( the above are found,)4 883( neither of)2 434( If)1 136(/.shell in the user's home directory.)5 1472 4 1561 2496 t
10 I f
(esh)4522 2496 w
10 R f
(will transfer con-)2 709 1 4691 2496 t
(trol to a prede\256ned shell, currently /bin/csh.)6 1796 1 1080 2616 t
(A typical site wide usage of)5 1212 1 1080 2784 t
10 I f
(esh)2338 2784 w
10 R f
( system)1 324( The)1 234(would be to make it every user's shell in /etc/passwd.)9 2325 3 2517 2784 t
( speci\256c /etc/environ that set up appropriate values for PATH,)9 2695(administrator would then create a site)5 1625 2 1080 2904 t
(MANPATH, LD)1 686 1 1080 3024 t
10 S f
(_)1766 3024 w
10 R f
(LIBRARY)1816 3024 w
10 S f
(_)2255 3024 w
10 R f
( the simplest case, the user would then create a .shell \256le in)12 2483( In)1 151(PATH, etc.)1 461 3 2305 3024 t
( it a sym-)3 423(his home directory and stash the name of his preferred shell in there \(or alternatively, make)15 3897 2 1080 3144 t
( variables would)2 686( environment)1 576( would then be the same as before, ie.)8 1598( Everything)1 514(bolic link to his shell\).)4 946 5 1080 3264 t
( .login for csh/tcsh users and .pro\256le for sh/ksh/bash users, but with the added advantage of)15 3945(be set in)2 375 2 1080 3384 t
(already having a reasonable environment.)4 1697 1 1080 3504 t
( make all his environment)4 1106(Alternatively, the user could create a .environ \256le in his home directory and)12 3214 2 1080 3672 t
( will be used by)4 665( should include a value for SHELL, which)7 1755( This)1 245(bindings there.)1 603 4 1080 3792 t
10 I f
(esh)4381 3792 w
10 R f
(to determine his pre-)3 853 1 4547 3792 t
( approach has the additional advantage of being shell)8 2278( This)1 256( of a .shell \256le.)4 674(ferred shell in the absense)4 1112 4 1080 3912 t
( decides to change shell \(by editing .environ or changing .shell\), his personal)12 3209(independent, ie. if the user)4 1111 2 1080 4032 t
(environment will automatically be available under the new shell.)8 2652 1 1080 4152 t
(If)1080 4320 w
10 I f
(esh)1181 4320 w
10 R f
( with the AUTO)3 685(is compiled)1 474 2 1349 4320 t
10 S f
(_)2508 4320 w
10 R f
(PRUNE)2558 4320 w
10 S f
(_)2886 4320 w
10 R f
(PATH option turned on, all variables with names ending in)9 2464 1 2936 4320 t
10 S1 f
(")1080 4440 w
10 R f
(PATH)1121 4440 w
10 S1 f
(")1382 4440 w
10 R f
(will be assumed to contain values of the form:)8 1984 1 1465 4440 t
10 I f
(dir)3524 4440 w
8 I f
(1)3641 4480 w
10 R f
(:)3697 4440 w
10 I f
(dir)3741 4440 w
8 I f
(2)3858 4480 w
10 R f
(:)3914 4440 w
10 I f
(dir)3958 4440 w
8 I f
(3)4075 4480 w
10 R f
(: ... :)2 163 1 4131 4440 t
10 I f
(dir)4310 4440 w
8 I f
(n)4427 4480 w
10 R f
( a list of colon)4 636(, ie. as)2 289 2 4475 4440 t
( duplications, so that if a)5 1063( variables will be automatically pruned of)6 1754( These)1 311(separated directories or \256les.)3 1192 4 1080 4560 t
10 I f
(dir)1080 4680 w
8 I f
(i)1197 4720 w
10 R f
( addition, null)2 599( In)1 161( be removed.)2 558(appears more than once in the sequence, all but the \256rst one will)12 2817 4 1265 4680 t
( in that it allows a user to freely add to an already existing path vari-)15 2906( is useful)2 383( This)1 247(\256elds are removed.)2 784 4 1080 4800 t
(able without having to worry about possible duplications or null entries.)10 2959 1 1080 4920 t
(The format of an environment binding in /etc/environ or .environ is as follows:)12 3251 1 1080 5088 t
10 S1 f
(<)1440 5208 w
10 R f
(name)1496 5208 w
10 S1 f
(>)1712 5208 w
10 R f
([=])1801 5208 w
10 S1 f
(<)1956 5208 w
10 R f
(value)2012 5208 w
10 S1 f
(>)2228 5208 w
10 R f
([)2284 5208 w
10 S1 f
(\\)2317 5208 w
(<)1956 5328 w
10 R f
(continued)2012 5328 w
10 S f
(_)2406 5328 w
10 R f
(value)2456 5328 w
10 S1 f
(>)2672 5328 w
10 R f
(])2728 5328 w
( environment variable name should be followed by whitespace or an equal sign and a value.)15 3875(That is, an)2 445 2 1080 5448 t
( may be continued on the next one if the current line ends with a)14 2904(Values that don't \256t on one line)6 1416 2 1080 5568 t
(backslash \()1 465 1 1080 5688 t
10 S1 f
(\\)1545 5688 w
10 R f
( may appear anywhere on the line by inserting a hash sign \()12 2613(\). Comments)1 569 2 1573 5688 t
10 S1 f
(#)4755 5688 w
10 R f
(\) and goes on)3 595 1 4805 5688 t
( include other the value of other variables by the usual $VARI-)11 2707( may)1 215( Values)1 353(until the end of the line.)5 1045 4 1080 5808 t
( backslashes may be)3 845( Finally,)1 378( output a program by enclosing it in backquotes \(`\).)9 2152(ABLE syntax or to the)4 945 4 1080 5928 t
(used to quote any other character, except newline.)7 2053 1 1080 6048 t
(For example:)1 538 1 1080 6288 t
10 S1 f
(#)1440 6468 w
10 R f
(Setup default paths, etc.)3 981 1 1523 6468 t
(OPENWINHOME /usr/openwin)1 1375 1 1440 6588 t
10 S1 f
(#)2914 6588 w
10 R f
(not /home/openwin)1 783 1 2997 6588 t
(PATH .:/usr/local/bin.`arch`:/bin:/usr/bin:/usr/ucb:)1 2592 1 1440 6708 t
10 S1 f
(\\)4032 6708 w
10 R f
($OPENWINHOME/bin)2293 6828 w
( the)1 173(If the environment \256les are changed, the user will normally need to logout and login again for)16 4147 2 1080 6996 t
( he can also execute)4 869( Alternatively,)1 628(changes to take effect.)3 945 3 1080 7116 t
10 I f
(esh)3565 7116 w
10 R f
(interactively, in which case it will give)6 1659 1 3741 7116 t
( still remain behind)3 853( old shell will)3 623( The)1 238(him a new shell augmented with the new environment.)8 2389 4 1080 7236 t
10 I f
(esh)5234 7236 w
10 R f
(,)5375 7236 w
( 1)1 1728(Last change: 16 January 1990)4 1224 2 2448 7716 t
cleartomark
showpage
restore
%%EndPage: 1 1
%%Page: 2 2
save
mark
2 pagesetup
10 R f
( \( 1 \))3 164( ESH)1 1838( Commands)1 489( User)1 1836(ESH \( 1 \))3 353 5 720 480 t
(unless it is replaced using the traditional)6 1742 1 1080 960 t
10 I f
(exec)2869 960 w
10 R f
( some properties of the current shell,)6 1587(command. Since)1 721 2 3092 960 t
( two special)2 513(such as temporary aliases and the history, may be lost by this procedure,)12 3094 2 1080 1080 t
10 I f
(esh)4730 1080 w
10 R f
(options will)1 494 1 4906 1080 t
(turn)1080 1200 w
10 I f
(esh)1282 1200 w
10 R f
( representation of the bindings in either)6 1660(into an environment translator that produces an ASCII)7 2284 2 1456 1200 t
10 I f
(sh)1080 1320 w
10 R f
(or)1203 1320 w
10 I f
(csh)1320 1320 w
10 R f
(format. The)1 513 1 1487 1320 t
10 S1 f
(\261)2034 1320 w
10 B f
(B)2099 1320 w
10 R f
(option will select)2 709 1 2201 1320 t
10 I f
(Bourne shell)1 518 1 2945 1320 t
10 R f
(syntax, while)1 543 1 3498 1320 t
10 S1 f
(\261)4076 1320 w
10 B f
(C)4141 1320 w
10 R f
(will produce)1 512 1 4248 1320 t
10 I f
(C-shell)4795 1320 w
10 R f
(output.)5119 1320 w
( spawned, but control will be released back)7 1780(When either of these options is selected, no new shell will be)11 2540 2 1080 1440 t
(to the invoker.)2 596 1 1080 1560 t
9 B f
(OPTIONS)720 1728 w
10 S1 f
(\261)1080 1848 w
10 B f
(B)1145 1848 w
10 R f
( rather print out the environment bindings in)7 1865(Don't create a new shell, but)5 1207 2 1440 1848 t
10 I f
(Bourne shell)1 521 1 4550 1848 t
10 R f
(format,)5109 1848 w
(suitable for being sourced by)4 1191 1 1440 1968 t
10 I f
(sh)2664 1968 w
10 R f
(\(1\).)2761 1968 w
10 S1 f
(\261)1080 2136 w
10 B f
(C)1145 2136 w
10 R f
( but rather print out the environment bindings in)8 2039(Don't create a new shell,)4 1046 2 1440 2136 t
10 I f
(C-shell)4564 2136 w
10 R f
(format, suit-)1 508 1 4892 2136 t
(able for being sourced by)4 1046 1 1440 2256 t
10 I f
(csh)2519 2256 w
10 R f
(\(1\).)2660 2256 w
10 S1 f
(\261)1080 2424 w
10 B f
(D)1145 2424 w
10 R f
( this \257ag,)2 400( With)1 273(Turn on debugging output.)3 1117 3 1440 2424 t
10 I f
(esh)3270 2424 w
10 R f
( all environment bindings as they are)6 1572(will print)1 385 2 3443 2424 t
(parsed in addition to some other output.)6 1639 1 1440 2544 t
10 S1 f
(\261)1080 2712 w
10 B f
(E)1145 2712 w
10 I f
(sysenv)1245 2712 w
10 R f
(The name of the system global environment \256le, by default /etc/environ.)10 2971 1 1440 2832 t
10 S1 f
(\261)1080 3000 w
10 B f
(F)1145 3000 w
10 I f
(usrenv)1239 3000 w
10 R f
(The name of the user's personal environment \256le, by default)9 2484 1 1440 3120 t
10 S1 f
(\304)3957 3120 w
10 R f
(/.environ.)3990 3120 w
10 S1 f
(\261)1080 3288 w
10 B f
(L)1145 3288 w
10 R f
(Pretend to be a login shell.)5 1116 1 1440 3288 t
10 I f
(Esh)2624 3288 w
10 R f
( new shell a login shell only if it is a login shell)12 2027(will make the)2 564 2 2809 3288 t
(itself \(ie. has a dash as the \256rst char of argv[0]\).)10 1986 1 1440 3408 t
10 S1 f
(\261)1080 3576 w
10 B f
(S)1145 3576 w
10 I f
(shell)1234 3576 w
10 R f
(The name of the program that)5 1314 1 1440 3696 t
10 I f
(esh)2804 3696 w
10 R f
(should replace itself with after having set up the initial)9 2412 1 2988 3696 t
( the shell from the)4 811( option will override the normal procedure of selecting)8 2361(environment. This)1 788 3 1440 3816 t
(SHELL environment variable \(or by looking at the user's .shell \256le, if one exists\).)13 3378 1 1440 3936 t
9 B f
(EXAMPLES)720 4104 w
10 R f
(% chsh)1 299 1 1080 4224 t
(Old shell: /usr/local/bin/tcsh)2 1150 1 1080 4344 t
(New shell: /usr/local/bin/esh)2 1160 1 1080 4464 t
(% cat /etc/environ)2 742 1 1080 4584 t
(PATH .:/usr/local/bin:/bin:/usr/ucb:/usr/games)1 2429 1 1080 4704 t
(% cd)1 210 1 1080 4824 t
(% cat)1 232 1 1080 4944 t
10 S1 f
(>)1345 4944 w
10 R f
(.environ)1401 4944 w
(SHELL /usr/local/bin/tcsh)1 1570 1 1080 5064 t
(PATH .:$HOME/bin:$PATH)1 1745 1 1080 5184 t
10 S1 f
(\303)1080 5304 w
10 R f
(D)1113 5304 w
(% login)1 322 1 1080 5424 t
([...])1080 5544 w
(% echo $SHELL)2 698 1 1080 5664 t
(/usr/local/bin/tcsh)1080 5784 w
(% echo $PATH)2 648 1 1080 5904 t
(.:/home/lovstrand/bin:/usr/local/bin:/bin:/usr/ucb:/usr/games)1080 6024 w
(% cat)1 232 1 1080 6144 t
10 S1 f
(>>)1345 6144 w
10 R f
(.environ)1457 6144 w
(MANPATH $HOME/man:$MANPATH)1 1969 1 1080 6264 t
10 S1 f
(\303)1080 6384 w
10 R f
(D)1113 6384 w
(% esh -C)2 382 1 1080 6504 t
10 S1 f
(>)1495 6504 w
10 R f
(foo)1551 6504 w
(% source foo)2 542 1 1080 6624 t
(% echo $MANPATH)2 881 1 1080 6744 t
(/home/lovstrand/man)1080 6864 w
9 B f
(AUTHOR)720 7032 w
10 R f
(Lennart Lovstrand)1 748 1 1080 7152 t
10 S1 f
(<)1861 7152 w
10 R f
(Lovstrand)1917 7152 w
10 S1 f
(@)2322 7152 w
10 R f
(EuroPARC.Xerox.COM)2414 7152 w
10 S1 f
(>)3397 7152 w
10 R f
(Rank Xerox EuroPARC, Cambridge, England.)4 1900 1 1080 7272 t
( 2)1 1728(Last change: 16 January 1990)4 1224 2 2448 7752 t
cleartomark
showpage
restore
%%EndPage: 2 2
%%Page: 3 3
save
mark
3 pagesetup
10 R f
( \( 1 \))3 164( ESH)1 1838( Commands)1 489( User)1 1836(ESH \( 1 \))3 353 5 720 480 t
9 B f
(SEE ALSO)1 445 1 720 960 t
10 I f
(csh)1080 1080 w
10 R f
(\(1\),)1221 1080 w
10 I f
(sh)1395 1080 w
10 R f
(\(1\),)1492 1080 w
10 I f
(tcsh)1666 1080 w
10 R f
(\(l\))1835 1080 w
9 B f
(BUGS)720 1248 w
10 I f
(Esh)1080 1368 w
10 R f
(has a compiled-in limit of 10,240 chars for each environment binding and a total of 1,024 bindings.)16 4099 1 1263 1368 t
( 3)1 1728(Last change: 16 January 1990)4 1224 2 2448 7680 t
cleartomark
showpage
restore
%%EndPage: 3 3
%%Trailer
done
%%DocumentFonts: Times-Roman Times-Bold Symbol Times-Italic
%%Pages: 3
